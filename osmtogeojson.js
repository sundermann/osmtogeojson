!function(e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).osmtogeojson=e()}(function(){return function r(o,i,a){function u(t,e){if(!i[t]){if(!o[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(s)return s(t,!0);throw(n=new Error("Cannot find module '"+t+"'")).code="MODULE_NOT_FOUND",n}n=i[t]={exports:{}},o[t][0].call(n.exports,function(e){return u(o[t][1][e]||e)},n,n.exports,r,o,i,a)}return i[t].exports}for(var s="function"==typeof require&&require,e=0;e<a.length;e++)u(a[e]);return u}({1:[function(e,t,n){var P=e("./lodash.custom.js"),B=e("geojson-rewind"),r={};function o(e,t){return(e.version||t.version)&&e.version!==t.version?(e.version||0)>(t.version||0)?e:t:P.merge(e,t)}e("osm-polygon-features").forEach(function(e){var t,n;"all"===e.polygon?r[e.key]=!0:(t="whitelist"===e.polygon?"included_values":"excluded_values",n={},e.values.forEach(function(e){n[e]=!0}),r[e.key]={},r[e.key][t]=n)});e={},e=function(e,N){var t,a,u,s,l,c;function f(e,t,n){e.hasAttribute(n)&&(t[n]=e.getAttribute(n))}function p(e,t){e=P.clone(e);f(t,e,"lat"),f(t,e,"lon"),e.__is_center_placeholder=!0,s.push(e)}function y(e,t){var r=P.clone(e);function n(e,t,n){t={type:"node",id:"_"+r.type+"/"+r.id+"bounds"+n,lat:e,lon:t};r.nodes.push(t.id),s.push(t)}r.nodes=[],n(t.getAttribute("minlat"),t.getAttribute("minlon"),1),n(t.getAttribute("maxlat"),t.getAttribute("minlon"),2),n(t.getAttribute("maxlat"),t.getAttribute("maxlon"),3),n(t.getAttribute("minlat"),t.getAttribute("maxlon"),4),r.nodes.push(r.nodes[0]),r.__is_bounds_placeholder=!0,l.push(r)}function d(r,e){P.isArray(r.nodes)||(r.nodes=[],P.each(e,function(e,t){r.nodes.push("_anonymous@"+e.getAttribute("lat")+"/"+e.getAttribute("lon"))})),P.each(e,function(e,t){var n;e.getAttribute("lat")&&(n=e.getAttribute("lat"),e=e.getAttribute("lon"),t=r.nodes[t],e={type:"node",id:t,lat:n,lon:e},s.push(e),e.id)})}function g(i,e){function a(e,t){var n;l.some(function(e){return"way"==e.type&&e.id==t})||(n={type:"way",id:t,nodes:[]},P.each(e,function(e){var t;e.getAttribute("lat")?(t=e.getAttribute("lat"),e=e.getAttribute("lon"),e={type:"node",id:"_anonymous@"+t+"/"+e,lat:t,lon:e},n.nodes.push(e.id),s.push(e)):n.nodes.push(void 0)}),l.push(n))}P.each(e,function(e,t){var n,r,o;"node"==i.members[t].type?e.getAttribute("lat")&&(n=e.getAttribute("lat"),r=e.getAttribute("lon"),o=i.members[t].ref,s.push({type:"node",id:o,lat:n,lon:r})):"way"==i.members[t].type&&0<e.getElementsByTagName("nd").length&&(i.members[t].ref="_fullGeom"+i.members[t].ref,a(e.getElementsByTagName("nd"),i.members[t].ref))})}return N=P.merge({verbose:!1,flatProperties:!1,uninterestingTags:{source:!0,source_ref:!0,"source:ref":!0,history:!0,attribution:!0,created_by:!0,"tiger:county":!0,"tiger:tlid":!0,"tiger:upload_uuid":!0},polygonFeatures:r,deduplicator:o},N),"undefined"!=typeof XMLDocument&&e instanceof XMLDocument||"undefined"==typeof XMLDocument&&e.childNodes?(t=e,s=new Array,l=new Array,c=new Array,P.each(t.getElementsByTagName("node"),function(e,t){var n={};P.each(e.getElementsByTagName("tag"),function(e){n[e.getAttribute("k")]=e.getAttribute("v")});var r={type:"node"};f(e,r,"id"),f(e,r,"lat"),f(e,r,"lon"),f(e,r,"version"),f(e,r,"timestamp"),f(e,r,"changeset"),f(e,r,"uid"),f(e,r,"user"),P.isEmpty(n)||(r.tags=n),s.push(r)}),P.each(t.getElementsByTagName("way"),function(e,t){var n={},r=[];P.each(e.getElementsByTagName("tag"),function(e){n[e.getAttribute("k")]=e.getAttribute("v")});var o=!1;P.each(e.getElementsByTagName("nd"),function(e,t){var n;(n=e.getAttribute("ref"))&&(r[t]=n),!o&&e.getAttribute("lat")&&(o=!0)});var i={type:"way"};f(e,i,"id"),f(e,i,"version"),f(e,i,"timestamp"),f(e,i,"changeset"),f(e,i,"uid"),f(e,i,"user"),0<r.length&&(i.nodes=r),P.isEmpty(n)||(i.tags=n),(a=e.getElementsByTagName("center")[0])&&p(i,a),o?d(i,e.getElementsByTagName("nd")):(u=e.getElementsByTagName("bounds")[0])&&y(i,u),l.push(i)}),P.each(t.getElementsByTagName("relation"),function(e,t){var n={},r=[];P.each(e.getElementsByTagName("tag"),function(e){n[e.getAttribute("k")]=e.getAttribute("v")});var o=!1;P.each(e.getElementsByTagName("member"),function(e,t){r[t]={},f(e,r[t],"ref"),f(e,r[t],"role"),f(e,r[t],"type"),(!o&&"node"==r[t].type&&e.getAttribute("lat")||"way"==r[t].type&&0<e.getElementsByTagName("nd").length)&&(o=!0)});var i={type:"relation"};f(e,i,"id"),f(e,i,"version"),f(e,i,"timestamp"),f(e,i,"changeset"),f(e,i,"uid"),f(e,i,"user"),0<r.length&&(i.members=r),P.isEmpty(n)||(i.tags=n),(a=e.getElementsByTagName("center")[0])&&p(i,a),o?g(i,e.getElementsByTagName("member")):(u=e.getElementsByTagName("bounds")[0])&&y(i,u),c.push(i)}),h(s,l,c)):function(e){var a=new Array,o=new Array,t=new Array;function n(e){var t=P.clone(e);t.lat=e.center.lat,t.lon=e.center.lon,t.__is_center_placeholder=!0,a.push(t)}function r(e){var r=P.clone(e);function t(e,t,n){t={type:"node",id:"_"+r.type+"/"+r.id+"bounds"+n,lat:e,lon:t};r.nodes.push(t.id),a.push(t)}r.nodes=[],t(r.bounds.minlat,r.bounds.minlon,1),t(r.bounds.maxlat,r.bounds.minlon,2),t(r.bounds.maxlat,r.bounds.maxlon,3),t(r.bounds.minlat,r.bounds.maxlon,4),r.nodes.push(r.nodes[0]),r.__is_bounds_placeholder=!0,o.push(r)}function i(r){P.isArray(r.nodes)||(r.nodes=r.geometry.map(function(e){return null!==e?"_anonymous@"+e.lat+"/"+e.lon:"_anonymous@unknown_location"})),r.geometry.forEach(function(e,t){var n;e&&(n=e.lat,e=e.lon,t=r.nodes[t],a.push({type:"node",id:t,lat:n,lon:e}))})}function u(e){function i(e,t){var n;o.some(function(e){return"way"==e.type&&e.id==t})||(n={type:"way",id:t,nodes:[]},e.forEach(function(e){var t;e?(t=e.lat,e=e.lon,e={type:"node",id:"_anonymous@"+t+"/"+e,lat:t,lon:e},n.nodes.push(e.id),a.push(e)):n.nodes.push(void 0)}),o.push(n))}e.members.forEach(function(e,t){var n,r,o;"node"==e.type?e.lat&&(n=e.lat,r=e.lon,o=e.ref,a.push({type:"node",id:o,lat:n,lon:r})):"way"==e.type&&e.geometry&&(e.ref="_fullGeom"+e.ref,i(e.geometry,e.ref))})}for(var s=0;s<e.elements.length;s++)switch(e.elements[s].type){case"node":var l=e.elements[s];a.push(l);break;case"way":var c=P.clone(e.elements[s]);c.nodes=P.clone(c.nodes),o.push(c),c.center&&n(c),c.geometry?i(c):c.bounds&&r(c);break;case"relation":l=P.clone(e.elements[s]);l.members=P.clone(l.members),t.push(l);c=l.members&&l.members.some(function(e){return"node"==e.type&&e.lat||"way"==e.type&&e.geometry&&0<e.geometry.length});l.center&&n(l),c?u(l):l.bounds&&r(l)}return h(a,o,t)}(e);function h(e,t,n){function r(e,t){if("object"!=typeof t&&(t={}),"function"==typeof N.uninterestingTags)return!N.uninterestingTags(e,t);for(var n in e)if(!0!==N.uninterestingTags[n]&&!0!==t[n]&&t[n]!==e[n])return 1}for(var o=new Object,i=new Object,a=0;a<e.length;a++)void 0!==(o[(f=void 0!==o[(f=e[a]).id]?N.deduplicator(f,o[f.id]):f).id]=f).tags&&r(f.tags)&&(i[f.id]=!0);for(a=0;a<n.length;a++)if(P.isArray(n[a].members))for(var u=0;u<n[a].members.length;u++)"node"==n[a].members[u].type&&(i[n[a].members[u].ref]=!0);for(var y=new Object,s=new Object,a=0;a<t.length;a++){var l=t[a];if(y[l.id]&&(l=N.deduplicator(l,y[l.id])),y[l.id]=l,P.isArray(l.nodes))for(u=0;u<l.nodes.length;u++)"object"!=typeof l.nodes[u]&&(s[l.nodes[u]]=!0,l.nodes[u]=o[l.nodes[u]])}var c=new Array;for(d in o){var f=o[d];s[d]&&!i[d]||c.push(f)}for(var p=new Array,a=0;a<n.length;a++)p[(b=p[(b=n[a]).id]?N.deduplicator(b,p[b.id]):b).id]=b;var d,g,h={node:{},way:{},relation:{}};for(d in p){var b=p[d];if(P.isArray(b.members))for(u=0;u<b.members.length;u++){var m=b.members[u].type,v=b.members[u].ref;"number"!=typeof v&&(v=v.replace("_fullGeom","")),h[m]?(void 0===h[m][v]&&(h[m][v]=[]),h[m][v].push({role:b.members[u].role,rel:b.id,reltags:b.tags})):N.verbose&&console.warn("Relation",b.type+"/"+b.id,"member",m+"/"+v,"ignored because it has an invalid type")}else N.verbose&&console.warn("Relation",b.type+"/"+b.id,"ignored because it has no members")}var _={type:"FeatureCollection",features:new Array};for(a=0;a<c.length;a++)void 0!==c[a].lon&&void 0!==c[a].lat?(O={type:"Feature",id:c[a].type+"/"+c[a].id,properties:{type:c[a].type,id:c[a].id,tags:c[a].tags||{},relations:h.node[c[a].id]||[]},geometry:{type:"Point",coordinates:[+c[a].lon,+c[a].lat]}},c[a].__is_center_placeholder&&(O.properties.geometry="center"),_.features.push(O)):N.verbose&&console.warn("POI",c[a].type+"/"+c[a].id,"ignored because it lacks coordinates");for(var w={type:"FeatureCollection",features:new Array},A={type:"FeatureCollection",features:new Array},a=0;a<n.length;a++)if(p[n[a].id]===n[a]&&void 0!==n[a].tags&&("multipolygon"==n[a].tags.type||"boundary"==n[a].tags.type)){if(P.isArray(n[a].members)){for(var j=0,u=0;u<n[a].members.length;u++)"outer"==n[a].members[u].role?j++:N.verbose&&"inner"!=n[a].members[u].role&&console.warn("Multipolygon",n[a].type+"/"+n[a].id,"member",n[a].members[u].type+"/"+n[a].members[u].ref,'ignored because it has an invalid role: "'+n[a].members[u].role+'"');if(n[a].members.forEach(function(e){y[e.ref]&&("outer"!==e.role||r(y[e.ref].tags,n[a].tags)||(y[e.ref].is_multipolygon_outline=!0),"inner"!==e.role||r(y[e.ref].tags)||(y[e.ref].is_multipolygon_outline=!0))}),0!=j){var k=!1,O=null;if(k=1==j&&!r(n[a].tags,{type:!0})?!0:k){var E=n[a].members.filter(function(e){return"outer"===e.role})[0];if(void 0===(E=y[E.ref])){N.verbose&&console.warn("Multipolygon relation",n[a].type+"/"+n[a].id,"ignored because outer way",E.type+"/"+E.ref,"is missing");continue}E.is_multipolygon_outline=!0,O=x(E,n[a])}else O=x(n[a],n[a]);!1!==O?A.features.push(O):N.verbose&&console.warn("Multipolygon relation",n[a].type+"/"+n[a].id,"ignored because it has invalid geometry")}else N.verbose&&console.warn("Multipolygon relation",n[a].type+"/"+n[a].id,"ignored because it has no outer ways")}else N.verbose&&console.warn("Multipolygon",n[a].type+"/"+n[a].id,"ignored because it has no members");function x(e,t){var n=!1,l=k?"way":"relation",c="number"==typeof e.id?e.id:+e.id.replace("_fullGeom","");function r(e){function t(e){return e[e.length-1]}for(var n,r,o,i,a,u,s=[];e.length;)for(n=e.pop().nodes.slice(),s.push(n);e.length&&n[0]!==t(n);){for(r=n[0],o=t(n),i=0;i<e.length;i++){if(o===(u=e[i].nodes)[0]){a=n.push,u=u.slice(1);break}if(o===t(u)){a=n.push,u=u.slice(0,-1).reverse();break}if(r==t(u)){a=n.unshift,u=u.slice(0,-1);break}if(r==u[0]){a=n.unshift,u=u.slice(1).reverse();break}u=a=null}if(!u){N.verbose&&console.warn("Multipolygon",l+"/"+c,"contains unclosed ring geometry");break}e.splice(i,1),a.apply(n,u)}return s}function o(e){function t(e){return e.map(function(e){return[+e.lat,+e.lon]})}var n,r=function(e,t){for(var n=e[0],r=e[1],o=!1,i=0,a=t.length-1;i<t.length;a=i++){var u=t[i][0],s=t[i][1],l=t[a][0],c=t[a][1];r<s!=r<c&&n<(l-u)*(r-s)/(c-s)+u&&(o=!o)}return o};for(e=t(e),n=0;n<i.length;n++)if(function(e,t){for(var n=0;n<t.length;n++)if(r(t[n],e))return!0;return!1}(t(i[n]),e))return n}p=(p=t.members.filter(function(e){return"way"===e.type})).map(function(t){var e=y[t.ref];return void 0===e?(N.verbose&&console.warn("Multipolygon",l+"/"+c,"tainted by a missing way",t.type+"/"+t.ref),void(n=!0)):{id:t.ref,role:t.role||"outer",way:e,nodes:e.nodes.filter(function(e){return void 0!==e||(n=!0,N.verbose&&console.warn("Multipolygon",l+"/"+c,"tainted by a way",t.type+"/"+t.ref,"with a missing node"),!1)})}});for(var i=r((p=P.compact(p)).filter(function(e){return"outer"===e.role})),a=r(p.filter(function(e){return"inner"===e.role})),u=i.map(function(e){return[e]}),s=0;s<a.length;s++){var f=o(a[s]);void 0!==f?u[f].push(a[s]):N.verbose&&console.warn("Multipolygon",l+"/"+c,"contains an inner ring with no containing outer")}t=[];if(0==(t=P.compact(u.map(function(e){e=P.compact(e.map(function(e){return e.length<4?void(N.verbose&&console.warn("Multipolygon",l+"/"+c,"contains a ring with less than four nodes")):P.compact(e.map(function(e){return[+e.lon,+e.lat]}))}));if(0!=e.length)return e;N.verbose&&console.warn("Multipolygon",l+"/"+c,"contains an empty ring cluster")}))).length)return N.verbose&&console.warn("Multipolygon",l+"/"+c,"contains no coordinates"),!1;var p="MultiPolygon";1===t.length&&(p="Polygon",t=t[0]);t={type:"Feature",id:e.type+"/"+c,properties:{type:e.type,id:c,tags:e.tags||{},relations:h[e.type][e.id]||[],meta:function(e){var t,n={timestamp:e.timestamp,version:e.version,changeset:e.changeset,user:e.user,uid:e.uid};for(t in n)void 0===n[t]&&delete n[t];return n}(e)},geometry:{type:p,coordinates:t}};return n&&(N.verbose&&console.warn("Multipolygon",l+"/"+c,"is tainted"),t.properties.tainted=!0),t}}for(a=0;a<t.length;a++)if(y[t[a].id]===t[a])if(P.isArray(t[a].nodes)){if(!t[a].is_multipolygon_outline){"number"!=typeof t[a].id&&(t[a].id=+t[a].id.replace("_fullGeom","")),t[a].tainted=!1,t[a].hidden=!1;var M,T=new Array;for(u=0;u<t[a].nodes.length;u++)"object"==typeof t[a].nodes[u]?T.push([+t[a].nodes[u].lon,+t[a].nodes[u].lat]):(N.verbose&&console.warn("Way",t[a].type+"/"+t[a].id,"is tainted by an invalid node"),t[a].tainted=!0);T.length<=1?N.verbose&&console.warn("Way",t[a].type+"/"+t[a].id,"ignored because it contains too few nodes"):(M="LineString",void 0!==t[a].nodes[0]&&t[a].nodes[0]===t[a].nodes[t[a].nodes.length-1]&&(void 0!==t[a].tags&&function(e){var t,n=N.polygonFeatures;if("function"==typeof n)return n(e);if("no"===e.area)return!1;for(t in e){var r=e[t],o=n[t];if(void 0!==o&&"no"!==r){if(!0===o)return!0;if(o.included_values&&!0===o.included_values[r])return!0;if(o.excluded_values&&!0!==o.excluded_values[r])return!0}}return!1}(t[a].tags)||t[a].__is_bounds_placeholder)&&(M="Polygon",T=[T]),O={type:"Feature",id:t[a].type+"/"+t[a].id,properties:{type:t[a].type,id:t[a].id,tags:t[a].tags||{},relations:h.way[t[a].id]||[]},geometry:{type:M,coordinates:T}},t[a].tainted&&(N.verbose&&console.warn("Way",t[a].type+"/"+t[a].id,"is tainted"),O.properties.tainted=!0),t[a].__is_bounds_placeholder&&(O.properties.geometry="bounds"),("LineString"==M?w:A).features.push(O))}}else N.verbose&&console.warn("Way",t[a].type+"/"+t[a].id,"ignored because it has no nodes");return(g={type:"FeatureCollection",features:[]}).features=g.features.concat(A.features),g.features=g.features.concat(w.features),g.features=g.features.concat(_.features),N.flatProperties&&g.features.forEach(function(e){e.properties=P.merge(e.properties.meta,e.properties.tags,{id:e.properties.type+"/"+e.properties.id})}),g=B(g,!0)}};t.exports=e.toGeojson=e},{"./lodash.custom.js":2,"geojson-rewind":4,"osm-polygon-features":5}],2:[function(e,Jt,Kt){!function(Ht){!function(){!function(){var m,e="Expected a function",r="__lodash_hash_undefined__",g=1,v=2,n=1/0,o=9007199254740991,y="[object Arguments]",f="[object Array]",d="[object Boolean]",h="[object Date]",p="[object Error]",b="[object Function]",_="[object GeneratorFunction]",w="[object Map]",A="[object Number]",j="[object Object]",i="[object Promise]",k="[object RegExp]",O="[object Set]",E="[object String]",x="[object Symbol]",a="[object WeakMap]",M="[object ArrayBuffer]",T="[object DataView]",N="[object Float32Array]",P="[object Float64Array]",B="[object Int8Array]",F="[object Int16Array]",S="[object Int32Array]",L="[object Uint8Array]",I="[object Uint8ClampedArray]",D="[object Uint16Array]",R="[object Uint32Array]",u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/,t=/^\./,l=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,c=/\\(\\)?/g,U=/\w*$/,$=/^\[object .+?Constructor\]$/,C=/^(?:0|[1-9]\d*)$/,G={};G[N]=G[P]=G[B]=G[F]=G[S]=G[L]=G[I]=G[D]=G[R]=!0,G[y]=G[f]=G[M]=G[d]=G[T]=G[h]=G[p]=G[b]=G[w]=G[A]=G[j]=G[k]=G[O]=G[E]=G[a]=!1;var z={};z[y]=z[f]=z[M]=z[T]=z[d]=z[h]=z[N]=z[P]=z[B]=z[F]=z[S]=z[w]=z[A]=z[j]=z[k]=z[O]=z[E]=z[x]=z[L]=z[I]=z[D]=z[R]=!0,z[p]=z[b]=z[a]=!1;var W="object"==typeof Ht&&Ht&&Ht.Object===Object&&Ht,q="object"==typeof self&&self&&self.Object===Object&&self,V=W||q||Function("return this")(),X="object"==typeof Kt&&Kt&&!Kt.nodeType&&Kt,H=X&&"object"==typeof Jt&&Jt&&!Jt.nodeType&&Jt,J=H&&H.exports===X,K=J&&W.process,Q=function(){try{return K&&K.binding("util")}catch(e){}}(),Y=Q&&Q.isTypedArray;function Z(e,t){return e.set(t[0],t[1]),e}function ee(e,t){return e.add(t),e}function te(e,t){for(var n=-1,r=e?e.length:0;++n<r&&!1!==t(e[n],n,e););return e}function ne(e,t,n,r){var o=-1,i=e?e.length:0;for(r&&i&&(n=e[++o]);++o<i;)n=t(n,e[o],o,e);return n}function re(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function oe(e){var n=-1,r=Array(e.size);return e.forEach(function(e,t){r[++n]=[t,e]}),r}function ie(t,n){return function(e){return t(n(e))}}function ae(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}var ue=Array.prototype,se=Function.prototype,le=Object.prototype,q=V["__core-js_shared__"],ce=(W=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||""))?"Symbol(src)_1."+W:"",fe=se.toString,pe=le.hasOwnProperty,ye=fe.call(Object),de=le.toString,ge=RegExp("^"+fe.call(pe).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Q=J?V.Buffer:m,q=V.Symbol,he=V.Uint8Array,be=ie(Object.getPrototypeOf,Object),me=Object.create,ve=le.propertyIsEnumerable,_e=ue.splice,W=Object.getOwnPropertySymbols,se=Q?Q.isBuffer:m,we=ie(Object.keys,Object),Ae=Math.max,J=lt(V,"DataView"),je=lt(V,"Map"),ue=lt(V,"Promise"),Q=lt(V,"Set"),V=lt(V,"WeakMap"),ke=lt(Object,"create"),Oe=!ve.call({valueOf:1},"valueOf"),Ee=vt(J),xe=vt(je),Me=vt(ue),Te=vt(Q),Ne=vt(V),q=q?q.prototype:m,Pe=q?q.valueOf:m,Be=q?q.toString:m;function Fe(){}function Se(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Le(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Ie(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function De(e){var t=-1,n=e?e.length:0;for(this.__data__=new Ie;++t<n;)this.add(e[t])}function Re(e){this.__data__=new Le(e)}function Ue(e,t){var n,r=kt(e)||jt(e)?function(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}(e.length,String):[],o=r.length,i=!!o;for(n in e)!t&&!pe.call(e,n)||i&&("length"==n||pt(n,o))||r.push(n);return r}function $e(e,t,n){(n===m||At(e[t],n))&&("number"!=typeof t||n!==m||t in e)||(e[t]=n)}function Ce(e,t,n){var r=e[t];pe.call(e,t)&&At(r,n)&&(n!==m||t in e)||(e[t]=n)}function Ge(e,t){for(var n=e.length;n--;)if(At(e[n][0],t))return n;return-1}function ze(n,r,o,i,e,t,a){var u;if((u=i?t?i(n,e,t,a):i(n):u)!==m)return u;if(!Nt(n))return n;var s,l=kt(n);if(l){if(u=function(e){var t=e.length,n=e.constructor(t);t&&"string"==typeof e[0]&&pe.call(e,"index")&&(n.index=e.index,n.input=e.input);return n}(n),!r)return it(n,u)}else{var c=ft(n),f=c==b||c==_;if(xt(n))return function(e,t){if(t)return e.slice();t=new e.constructor(e.length);return e.copy(t),t}(n,r);if(c==j||c==y||f&&!t){if(re(n))return t?n:{};if(u="function"!=typeof(s=f?{}:n).constructor||dt(s)?{}:function(e){return Nt(e)?me(e):{}}(be(s)),!r)return f=e=n,s=(s=u)&&at(f,$t(f),s),at(e,ct(e),s)}else{if(!z[c])return t?n:{};u=function(e,t,n,r){var o=e.constructor;switch(t){case M:return ot(e);case d:case h:return new o(+e);case T:return function(e,t){t=t?ot(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.byteLength)}(e,r);case N:case P:case B:case F:case S:case L:case I:case D:case R:return function(e,t){t=t?ot(e.buffer):e.buffer;return new e.constructor(t,e.byteOffset,e.length)}(e,r);case w:return function(e,t,n){return ne(t?n(oe(e),!0):oe(e),Z,new e.constructor)}(e,r,n);case A:case E:return new o(e);case k:return function(e){var t=new e.constructor(e.source,U.exec(e));return t.lastIndex=e.lastIndex,t}(e);case O:return function(e,t,n){return ne(t?n(ae(e),!0):ae(e),ee,new e.constructor)}(e,r,n);case x:return function(e){return Pe?Object(Pe.call(e)):{}}(e)}}(n,c,ze,r)}}var p,c=(a=a||new Re).get(n);return c||(a.set(n,u),te((p=!l?o?function(e,t,n){t=t(e);return kt(e)?t:function(e,t){for(var n=-1,r=t.length,o=e.length;++n<r;)e[o+n]=t[n];return e}(t,n(e))}(n,$t,ct):$t(n):p)||n,function(e,t){p&&(e=n[t=e]),Ce(u,t,ze(e,r,o,i,t,n,a))}),u)}Se.prototype.clear=function(){this.__data__=ke?ke(null):{}},Se.prototype.delete=function(e){return this.has(e)&&delete this.__data__[e]},Se.prototype.get=function(e){var t=this.__data__;if(ke){var n=t[e];return n===r?m:n}return pe.call(t,e)?t[e]:m},Se.prototype.has=function(e){var t=this.__data__;return ke?t[e]!==m:pe.call(t,e)},Se.prototype.set=function(e,t){return this.__data__[e]=ke&&t===m?r:t,this},Le.prototype.clear=function(){this.__data__=[]},Le.prototype.delete=function(e){var t=this.__data__;return!((e=Ge(t,e))<0)&&(e==t.length-1?t.pop():_e.call(t,e,1),!0)},Le.prototype.get=function(e){var t=this.__data__;return(e=Ge(t,e))<0?m:t[e][1]},Le.prototype.has=function(e){return-1<Ge(this.__data__,e)},Le.prototype.set=function(e,t){var n=this.__data__,r=Ge(n,e);return r<0?n.push([e,t]):n[r][1]=t,this},Ie.prototype.clear=function(){this.__data__={hash:new Se,map:new(je||Le),string:new Se}},Ie.prototype.delete=function(e){return st(this,e).delete(e)},Ie.prototype.get=function(e){return st(this,e).get(e)},Ie.prototype.has=function(e){return st(this,e).has(e)},Ie.prototype.set=function(e,t){return st(this,e).set(e,t),this},De.prototype.add=De.prototype.push=function(e){return this.__data__.set(e,r),this},De.prototype.has=function(e){return this.__data__.has(e)},Re.prototype.clear=function(){this.__data__=new Le},Re.prototype.delete=function(e){return this.__data__.delete(e)},Re.prototype.get=function(e){return this.__data__.get(e)},Re.prototype.has=function(e){return this.__data__.has(e)},Re.prototype.set=function(e,t){var n=this.__data__;if(n instanceof Le){var r=n.__data__;if(!je||r.length<199)return r.push([e,t]),this;n=this.__data__=new Ie(r)}return n.set(e,t),this};var We,qe,Ve,Xe=(We=function(e,t){return e&&He(e,t,$t)},function(e,t){if(null==e)return e;if(!Ot(e))return We(e,t);for(var n=e.length,r=qe?n:-1,o=Object(e);(qe?r--:++r<n)&&!1!==t(o[r],r,o););return e}),He=function(e,t,n){for(var r=-1,o=Object(e),i=n(e),a=i.length;a--;){var u=i[Ve?a:++r];if(!1===t(o[u],u,o))break}return e};function Je(e,t){for(var n=0,r=(t=yt(t,e)?[t]:rt(t)).length;null!=e&&n<r;)e=e[mt(t[n++])];return n&&n==r?e:m}function Ke(e,t){return null!=e&&t in Object(e)}function Qe(e,t,n,r,o){return e===t||(null==e||null==t||!Nt(e)&&!Pt(t)?e!=e&&t!=t:function(e,t,n,r,o,i){var a=kt(e),u=kt(t),s=f,l=f;a||(s=(s=ft(e))==y?j:s);u||(l=(l=ft(t))==y?j:l);var c=s==j&&!re(e),u=l==j&&!re(t),l=s==l;if(l&&!c)return i=i||new Re,a||Lt(e)?ut(e,t,n,r,o,i):function(e,t,n,r,o,i,a){switch(n){case T:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case M:return e.byteLength==t.byteLength&&r(new he(e),new he(t))?!0:!1;case d:case h:case A:return At(+e,+t);case p:return e.name==t.name&&e.message==t.message;case k:case E:return e==t+"";case w:var u=oe;case O:var s=i&v;if(u=u||ae,e.size!=t.size&&!s)return!1;s=a.get(e);if(s)return s==t;i|=g,a.set(e,t);u=ut(u(e),u(t),r,o,i,a);return a.delete(e),u;case x:if(Pe)return Pe.call(e)==Pe.call(t)}return!1}(e,t,s,n,r,o,i);if(!(o&v)){c=c&&pe.call(e,"__wrapped__"),u=u&&pe.call(t,"__wrapped__");if(c||u){c=c?e.value():e,u=u?t.value():t;return i=i||new Re,n(c,u,r,o,i)}}return l&&(i=i||new Re,function(e,t,n,r,o,i){var a=o&v,u=$t(e),s=u.length,l=$t(t).length;if(s!=l&&!a)return!1;var c=s;for(;c--;){var f=u[c];if(!(a?f in t:pe.call(t,f)))return!1}var p=i.get(e);if(p&&i.get(t))return p==t;var y=!0;i.set(e,t),i.set(t,e);var d=a;for(;++c<s;){f=u[c];var g,h=e[f],b=t[f];if(!((g=r?a?r(b,h,f,t,e,i):r(h,b,f,e,t,i):g)===m?h===b||n(h,b,r,o,i):g)){y=!1;break}d=d||"constructor"==f}y&&!d&&(l=e.constructor,p=t.constructor,l!=p&&"constructor"in e&&"constructor"in t&&!("function"==typeof l&&l instanceof l&&"function"==typeof p&&p instanceof p)&&(y=!1));return i.delete(e),i.delete(t),y}(e,t,n,r,o,i))}(e,t,Qe,n,r,o))}function Ye(e){var t;return Nt(e)&&(t=e,!(ce&&ce in t))&&(Mt(e)||re(e)?ge:$).test(vt(e))}function Ze(e){return"function"==typeof e?e:null==e?zt:"object"==typeof e?kt(e)?function(n,r){if(yt(n)&&gt(r))return ht(mt(n),r);return function(e){var t=Rt(e,n);return t===m&&t===r?Ut(e,n):Qe(r,t,m,g|v)}}(e[0],e[1]):function(t){var n=function(e){var t=$t(e),n=t.length;for(;n--;){var r=t[n],o=e[r];t[n]=[r,o,gt(o)]}return t}(t);if(1==n.length&&n[0][2])return ht(n[0][0],n[0][1]);return function(e){return e===t||function(e,t,n,r){var o=n.length,i=o,a=!r;if(null==e)return!i;for(e=Object(e);o--;){var u=n[o];if(a&&u[2]?u[1]!==e[u[0]]:!(u[0]in e))return!1}for(;++o<i;){var s=(u=n[o])[0],l=e[s],c=u[1];if(a&&u[2]){if(l===m&&!(s in e))return!1}else{var f,p=new Re;if(!((f=r?r(l,c,s,e,t,p):f)===m?Qe(c,l,r,g|v,p):f))return!1}}return!0}(e,t,n)}}(e):qt(e)}function et(e){if(!Nt(e))return function(e){var t=[];if(null!=e)for(var n in Object(e))t.push(n);return t}(e);var t,n=dt(e),r=[];for(t in e)("constructor"!=t||!n&&pe.call(e,t))&&r.push(t);return r}function tt(p,y,d,g,h){var b;p!==y&&te((b=!kt(y)&&!Lt(y)?et(y):b)||y,function(e,t){var n,r,o,i,a,u,s,l,c,f;Nt(e=b?y[t=e]:e)?(h=h||new Re,r=y,i=d,a=tt,u=g,s=h,l=(n=p)[o=t],c=r[o],(f=s.get(c))?$e(n,o,f):(f=u?u(l,c,o+"",n,r,s):m,(r=f===m)&&(kt(f=c)||Lt(c)?f=kt(l)?l:Et(l)?it(l):ze(c,!(r=!1)):Bt(c)||jt(c)?f=jt(l)?It(l):!Nt(l)||i&&Mt(l)?ze(c,!(r=!1)):l:r=!1),r&&(s.set(c,f),a(f,c,i,u,s),s.delete(c)),$e(n,o,f))):(f=g?g(p[t],e,t+"",p,y,h):m,$e(p,t,f=f===m?e:f))})}function nt(i,a){return a=Ae(a===m?i.length-1:a,0),function(){for(var e=arguments,t=-1,n=Ae(e.length-a,0),r=Array(n);++t<n;)r[t]=e[a+t];for(var t=-1,o=Array(a+1);++t<a;)o[t]=e[t];return o[a]=r,function(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}(i,this,o)}}function rt(e){return kt(e)?e:bt(e)}function ot(e){var t=new e.constructor(e.byteLength);return new he(t).set(new he(e)),t}function it(e,t){var n=-1,r=e.length;for(t=t||Array(r);++n<r;)t[n]=e[n];return t}function at(e,t,n,r){n=n||{};for(var o=-1,i=t.length;++o<i;){var a=t[o],u=r?r(n[a],e[a],a,n,e):m;Ce(n,a,u===m?e[a]:u)}return n}function ut(e,t,n,r,o,i){var a=o&v,u=e.length,s=t.length;if(u!=s&&!(a&&u<s))return!1;s=i.get(e);if(s&&i.get(t))return s==t;var l=-1,c=!0,f=o&g?new De:m;for(i.set(e,t),i.set(t,e);++l<u;){var p,y=e[l],d=t[l];if((p=r?a?r(d,y,l,t,e,i):r(y,d,l,e,t,i):p)!==m){if(p)continue;c=!1;break}if(f){if(!function(e,t){for(var n=-1,r=e?e.length:0;++n<r;)if(t(e[n],n,e))return 1}(t,function(e,t){return!f.has(t)&&(y===e||n(y,e,r,o,i))&&f.add(t)})){c=!1;break}}else if(y!==d&&!n(y,d,r,o,i)){c=!1;break}}return i.delete(e),i.delete(t),c}function st(e,t){var n,r=e.__data__;return("string"==(e=typeof(n=t))||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==n:null===n)?r["string"==typeof t?"string":"hash"]:r.map}function lt(e,t){t=t,t=null==(e=e)?m:e[t];return Ye(t)?t:m}var ct=W?ie(W,Object):Vt,ft=function(e){return de.call(e)};function pt(e,t){return!!(t=null==t?o:t)&&("number"==typeof e||C.test(e))&&-1<e&&e%1==0&&e<t}function yt(e,t){if(!kt(e)){var n=typeof e;return"number"==n||"symbol"==n||"boolean"==n||null==e||Ft(e)||(s.test(e)||!u.test(e)||null!=t&&e in Object(t))}}function dt(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||le)}function gt(e){return e==e&&!Nt(e)}function ht(t,n){return function(e){return null!=e&&(e[t]===n&&(n!==m||t in Object(e)))}}(J&&ft(new J(new ArrayBuffer(1)))!=T||je&&ft(new je)!=w||ue&&ft(ue.resolve())!=i||Q&&ft(new Q)!=O||V&&ft(new V)!=a)&&(ft=function(e){var t=de.call(e),e=t==j?e.constructor:m,e=e?vt(e):m;if(e)switch(e){case Ee:return T;case xe:return w;case Me:return i;case Te:return O;case Ne:return a}return t});var bt=wt(function(e){e=Dt(e);var o=[];return t.test(e)&&o.push(""),e.replace(l,function(e,t,n,r){o.push(n?r.replace(c,"$1"):t||e)}),o});function mt(e){if("string"==typeof e||Ft(e))return e;var t=e+"";return"0"==t&&1/e==-n?"-0":t}function vt(e){if(null!=e){try{return fe.call(e)}catch(e){}try{return e+""}catch(e){}}return""}function _t(e,t){return(kt(e)?te:Xe)(e,function(e,t){var n=(n=Fe.iteratee||Wt)===Wt?Ze:n;return arguments.length?n(e,t):n}(t,3))}function wt(r,o){if("function"!=typeof r||o&&"function"!=typeof o)throw new TypeError(e);var i=function(){var e=arguments,t=o?o.apply(this,e):e[0],n=i.cache;if(n.has(t))return n.get(t);e=r.apply(this,e);return i.cache=n.set(t,e),e};return i.cache=new(wt.Cache||Ie),i}function At(e,t){return e===t||e!=e&&t!=t}function jt(e){return Et(e)&&pe.call(e,"callee")&&(!ve.call(e,"callee")||de.call(e)==y)}wt.Cache=Ie;var kt=Array.isArray;function Ot(e){return null!=e&&Tt(e.length)&&!Mt(e)}function Et(e){return Pt(e)&&Ot(e)}var xt=se||Xt;function Mt(e){e=Nt(e)?de.call(e):"";return e==b||e==_}function Tt(e){return"number"==typeof e&&-1<e&&e%1==0&&e<=o}function Nt(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function Pt(e){return!!e&&"object"==typeof e}function Bt(e){if(!Pt(e)||de.call(e)!=j||re(e))return!1;e=be(e);if(null===e)return!0;e=pe.call(e,"constructor")&&e.constructor;return"function"==typeof e&&e instanceof e&&fe.call(e)==ye}function Ft(e){return"symbol"==typeof e||Pt(e)&&de.call(e)==x}var St,Lt=Y?(St=Y,function(e){return St(e)}):function(e){return Pt(e)&&Tt(e.length)&&!!G[de.call(e)]};function It(e){return at(e,Ct(e))}function Dt(e){return null==e?"":function(e){if("string"==typeof e)return e;if(Ft(e))return Be?Be.call(e):"";var t=e+"";return"0"==t&&1/e==-n?"-0":t}(e)}function Rt(e,t,n){t=null==e?m:Je(e,t);return t===m?n:t}function Ut(e,t){return null!=e&&function(e,t,n){for(var r,o=-1,i=(t=yt(t,e)?[t]:rt(t)).length;++o<i;){var a=mt(t[o]);if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(i=e?e.length:0)&&Tt(i)&&pt(a,i)&&(kt(e)||jt(e))}(e,t,Ke)}function $t(e){return(Ot(e)?Ue:function(e){if(!dt(e))return we(e);var t,n=[];for(t in Object(e))pe.call(e,t)&&"constructor"!=t&&n.push(t);return n})(e)}function Ct(e){return Ot(e)?Ue(e,!0):et(e)}var Gt,Y=(Gt=function(e,t,n){tt(e,t,n)},nt(function(e,t){var n=-1,r=t.length,o=1<r?t[r-1]:m,i=2<r?t[2]:m,o=3<Gt.length&&"function"==typeof o?(r--,o):m;for(i&&function(e,t,n){if(!Nt(n))return!1;var r=typeof t;if("number"==r?Ot(n)&&pt(t,n.length):"string"==r&&t in n)return At(n[t],e);return!1}(t[0],t[1],i)&&(o=r<3?m:o,r=1),e=Object(e);++n<r;){var a=t[n];a&&Gt(e,a,n,o)}return e}));function zt(e){return e}function Wt(e){return Ze("function"==typeof e?e:ze(e,!0))}function qt(e){return yt(e)?(n=mt(e),function(e){return null==e?m:e[n]}):(t=e,function(e){return Je(e,t)});var t,n}function Vt(){return[]}function Xt(){return!1}Fe.compact=function(e){for(var t=-1,n=e?e.length:0,r=0,o=[];++t<n;){var i=e[t];i&&(o[r++]=i)}return o},Fe.iteratee=Wt,Fe.keys=$t,Fe.keysIn=Ct,Fe.memoize=wt,Fe.merge=Y,Fe.property=qt,Fe.toPlainObject=It,Fe.clone=function(e){return ze(e,!1,!0)},Fe.eq=At,Fe.forEach=_t,Fe.get=Rt,Fe.hasIn=Ut,Fe.identity=zt,Fe.isArguments=jt,Fe.isArray=kt,Fe.isArrayLike=Ot,Fe.isArrayLikeObject=Et,Fe.isBuffer=xt,Fe.isEmpty=function(e){if(Ot(e)&&(kt(e)||"string"==typeof e||"function"==typeof e.splice||xt(e)||jt(e)))return!e.length;var t,n=ft(e);if(n==w||n==O)return!e.size;if(Oe||dt(e))return!we(e).length;for(t in e)if(pe.call(e,t))return!1;return!0},Fe.isFunction=Mt,Fe.isLength=Tt,Fe.isObject=Nt,Fe.isObjectLike=Pt,Fe.isPlainObject=Bt,Fe.isSymbol=Ft,Fe.isTypedArray=Lt,Fe.stubArray=Vt,Fe.stubFalse=Xt,Fe.toString=Dt,Fe.each=_t,Fe.VERSION="4.15.0",H&&((H.exports=Fe)._=Fe,X._=Fe)}.call(this)}.call(this)}.call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],3:[function(e,t,n){var i=e("wgs84");function r(e){var t=0;if(e&&0<e.length){t+=Math.abs(o(e[0]));for(var n=1;n<e.length;n++)t-=Math.abs(o(e[n]))}return t}function o(e){var t=0;if(2<e.length){for(var n,r,o=0;o<e.length-1;o++)n=e[o],t+=a((r=e[o+1])[0]-n[0])*(2+Math.sin(a(n[1]))+Math.sin(a(r[1])));t=t*i.RADIUS*i.RADIUS/2}return t}function a(e){return e*Math.PI/180}t.exports.geometry=function(e){{if("Polygon"===e.type)return r(e.coordinates);if("MultiPolygon"!==e.type)return null;for(var t=0,n=0;n<e.coordinates.length;n++)t+=r(e.coordinates[n]);return t}},t.exports.ring=o},{wgs84:7}],4:[function(e,t,n){var r=e("geojson-area");function o(t,n){return function(e){return t(e,n)}}function i(e,t){return"Polygon"===e.type?e.coordinates=a(e.coordinates,t):"MultiPolygon"===e.type&&(e.coordinates=e.coordinates.map(o(a,t))),e}function a(e,t){e[0]=u(e[0],!(t=!!t));for(var n=1;n<e.length;n++)e[n]=u(e[n],t);return e}function u(e,t){return 0<=r.ring(e)===t?e:e.reverse()}t.exports=function e(t,n){switch(t&&t.type||null){case"FeatureCollection":return t.features=t.features.map(o(e,n)),t;case"Feature":return t.geometry=e(t.geometry,n),t;case"Polygon":case"MultiPolygon":return i(t,n);default:return t}}},{"geojson-area":3}],5:[function(e,t,n){t.exports=e("./polygon-features.json")},{"./polygon-features.json":6}],6:[function(e,t,n){t.exports=[{key:"building",polygon:"all"},{key:"highway",polygon:"whitelist",values:["services","rest_area","escape","elevator"]},{key:"natural",polygon:"blacklist",values:["coastline","cliff","ridge","arete","tree_row"]},{key:"landuse",polygon:"all"},{key:"waterway",polygon:"whitelist",values:["riverbank","dock","boatyard","dam"]},{key:"amenity",polygon:"all"},{key:"leisure",polygon:"all"},{key:"barrier",polygon:"whitelist",values:["city_wall","ditch","hedge","retaining_wall","wall","spikes"]},{key:"railway",polygon:"whitelist",values:["station","turntable","roundhouse","platform"]},{key:"area",polygon:"all"},{key:"boundary",polygon:"all"},{key:"man_made",polygon:"blacklist",values:["cutline","embankment","pipeline"]},{key:"power",polygon:"whitelist",values:["plant","substation","generator","transformer"]},{key:"place",polygon:"all"},{key:"shop",polygon:"all"},{key:"aeroway",polygon:"blacklist",values:["taxiway"]},{key:"tourism",polygon:"all"},{key:"historic",polygon:"all"},{key:"public_transport",polygon:"all"},{key:"office",polygon:"all"},{key:"building:part",polygon:"all"},{key:"military",polygon:"all"},{key:"ruins",polygon:"all"},{key:"area:highway",polygon:"all"},{key:"craft",polygon:"all"},{key:"golf",polygon:"all"},{key:"indoor",polygon:"all"}]},{}],7:[function(e,t,n){t.exports.RADIUS=6378137,t.exports.FLATTENING=1/298.257223563,t.exports.POLAR_RADIUS=6356752.3142},{}]},{},[1])(1)});